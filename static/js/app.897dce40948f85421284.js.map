{"version":3,"sources":["webpack:///static/js/app.897dce40948f85421284.js","webpack:///./src/router/index.js","webpack:///./src/components/TreemapComponent.vue?a99b","webpack:///./src/main.js","webpack:///./src/treemap/index.js","webpack:///./src/utils/urlParser.js","webpack:///TreemapComponent.vue","webpack:///./src/components/TreemapComponent.vue?152c"],"names":["webpackJsonp","19","module","__webpack_exports__","__webpack_require__","__WEBPACK_IMPORTED_MODULE_0_vue__","__WEBPACK_IMPORTED_MODULE_1_vue_router__","__WEBPACK_IMPORTED_MODULE_2__components_TreemapComponent__","__WEBPACK_IMPORTED_MODULE_2__components_TreemapComponent___default","n","use","routes","path","name","component","a","props","4","exports","injectStyle","ssrContext","Component","42","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0_document_register_element_build_document_register_element__","__WEBPACK_IMPORTED_MODULE_1_vue__","__WEBPACK_IMPORTED_MODULE_2_vue_custom_element__","__WEBPACK_IMPORTED_MODULE_3__components_TreemapComponent__","__WEBPACK_IMPORTED_MODULE_3__components_TreemapComponent___default","__WEBPACK_IMPORTED_MODULE_4_es6_promise__","__WEBPACK_IMPORTED_MODULE_4_es6_promise___default","polyfill","config","productionTip","customElement","43","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck___default","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass__","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass___default","__WEBPACK_IMPORTED_MODULE_2_jquery__","__WEBPACK_IMPORTED_MODULE_2_jquery___default","__WEBPACK_IMPORTED_MODULE_3_d3__","Treemap","elementID","this","$treemap","treemap","div","key","width","height","empty","size","sticky","sort","b","Math","abs","d","append","style","data","dimension","positionNode","x","y","max","dx","dy","create","root","children","i","cells","length","push","value_fmt","percentage","href","color","datum","selectAll","nodes","enter","attr","call","classed","summary","_value","html","on","transition","duration","background","darker","delay","min","44","parseURL","url","query","hashURL","split","querySplit","queryStr","hashParts","filter","s","__WEBPACK_IMPORTED_MODULE_0_query_string__","45","__WEBPACK_IMPORTED_MODULE_0__treemap__","__WEBPACK_IMPORTED_MODULE_1__utils_urlParser__","__WEBPACK_IMPORTED_MODULE_2_axios__","__WEBPACK_IMPORTED_MODULE_2_axios___default","__WEBPACK_IMPORTED_MODULE_4_query_string__","__WEBPACK_IMPORTED_MODULE_5_accounting__","datapackage","apiurl","model","colors","hierarchies","datapackageHierarchy","label","filters","Jahr","values","type","default","Typ","defaultLabel","titelart","selectedHierarchy","mounted","getURLParameters","getModel","methods","defaultFilters","k","$set","URLarguments","window","location","toString","hash","hierarchy","find","h","splice","urlFilters","getHierarchies","levelsLength","hierqQuery","hierqName","dimensions","addFilter","join","getDrilldown","hierarchyName","dimensionName","_this","apiRequestUrl","get","then","response","addEventListener","updateData","getData","getCurrentLevel","levelName","getFilters","filterArgumentQuote","defaultFilter","defaultFilterValue","formatValue","$event","_this2","drilldown","hierarchiesFilter","ordinal","range","domain","total_cell_count","total","valueDimension","c","level","levelsParams","percentageFmt","toFixed","replace","render","catch","e","console","log","60","66","_vm","_h","$createElement","_c","_self","staticClass","_l","hierq","attrs","_v","_s","filterName","directives","rawName","expression","onchange","change","$$selectedVal","Array","prototype","target","options","o","selected","map","multiple","_e","domProps","filterValue","_m","cell","class","small","staticRenderFns","69"],"mappings":"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","file":"static/js/app.897dce40948f85421284.js","sourcesContent":["webpackJsonp([1],{\n\n/***/ 19:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vue_router__ = __webpack_require__(67);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__components_TreemapComponent__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__components_TreemapComponent___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__components_TreemapComponent__);\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */].use(__WEBPACK_IMPORTED_MODULE_1_vue_router__[\"a\" /* default */]);\n\n/* unused harmony default export */ var _unused_webpack_default_export = (new __WEBPACK_IMPORTED_MODULE_1_vue_router__[\"a\" /* default */]({\n  routes: [{\n    path: '/:level',\n    name: 'Treemap',\n    component: __WEBPACK_IMPORTED_MODULE_2__components_TreemapComponent___default.a,\n    props: true\n  }]\n}));\n\n/***/ }),\n\n/***/ 4:\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction injectStyle (ssrContext) {\n  __webpack_require__(60)\n}\nvar Component = __webpack_require__(65)(\n  /* script */\n  __webpack_require__(45),\n  /* template */\n  __webpack_require__(66),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 42:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_document_register_element_build_document_register_element__ = __webpack_require__(20);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_document_register_element_build_document_register_element___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_document_register_element_build_document_register_element__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vue__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_vue_custom_element__ = __webpack_require__(22);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__components_TreemapComponent__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__components_TreemapComponent___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3__components_TreemapComponent__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_es6_promise__ = __webpack_require__(21);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_es6_promise___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_es6_promise__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__router__ = __webpack_require__(19);\n\n\n\n\n\n/* eslint-disable no-unused-vars */\n\n\n__WEBPACK_IMPORTED_MODULE_4_es6_promise___default.a.polyfill();\n\n__WEBPACK_IMPORTED_MODULE_1_vue__[\"a\" /* default */].config.productionTip = false;\n__WEBPACK_IMPORTED_MODULE_1_vue__[\"a\" /* default */].use(__WEBPACK_IMPORTED_MODULE_2_vue_custom_element__[\"a\" /* default */]);\n__WEBPACK_IMPORTED_MODULE_1_vue__[\"a\" /* default */].customElement('dp-treemap', __WEBPACK_IMPORTED_MODULE_3__components_TreemapComponent___default.a);\n\n/***/ }),\n\n/***/ 43:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck__ = __webpack_require__(47);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass__ = __webpack_require__(48);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_jquery__ = __webpack_require__(62);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_jquery___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_jquery__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_d3__ = __webpack_require__(15);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_d3___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_d3__);\n\n\n\n\n\nvar Treemap = function () {\n  function Treemap(elementID) {\n    __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck___default()(this, Treemap);\n\n    this.$treemap = __WEBPACK_IMPORTED_MODULE_2_jquery___default()(elementID);\n    this.treemap = null;\n    this.div = null;\n  }\n\n  __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass___default()(Treemap, [{\n    key: 'create',\n    value: function create() {\n      this.width = this.$treemap.width();\n      this.height = this.$treemap.height();\n\n      this.$treemap.empty();\n\n      this.treemap = __WEBPACK_IMPORTED_MODULE_3_d3__[\"layout\"].treemap().size([this.width, this.height]).sticky(true).sort(function (a, b) {\n        return Math.abs(a.value) - Math.abs(b.value);\n      }).value(function (d) {\n        return Math.abs(d.value);\n      });\n\n      this.div = __WEBPACK_IMPORTED_MODULE_3_d3__[\"select\"]('.treemap').append('div').style('position', 'relative').style('width', this.width + 'px').style('height', this.height + 'px');\n    }\n  }, {\n    key: 'render',\n    value: function render(data, dimension) {\n      // TODO: remove elements, don't create each time.\n      this.create();\n\n      var root = {\n        children: []\n      };\n      for (var i = 0; i < data.cells.length; i += 1) {\n        root.children.push({\n          name: data.cells[i]['_label'],\n          value: data.cells[i]['_value'],\n          value_fmt: data.cells[i]['_value_fmt'],\n          percentage: data.cells[i]['_percentage'],\n          href: data.cells[i]['_url'],\n          color: data.cells[i]['_color']\n        });\n      }\n\n      function positionNode(d) {\n        d.style('left', function (d) {\n          return d.x + 'px';\n        }).style('top', function (d) {\n          return d.y + 'px';\n        }).style('width', function (d) {\n          return Math.max(0, d.dx - 1) + 'px';\n        }).style('height', function (d) {\n          return Math.max(0, d.dy - 1) + 'px';\n        });\n      }\n\n      this.div.datum(root).selectAll('.node').data(this.treemap.nodes).enter().append('a').attr('href', function (d) {\n        return d.href;\n      }).attr('class', 'node').call(positionNode).style('background', '#fff').classed('big', function (d) {\n        return d.value > data.summary._value / 50;\n      }).html(function (d) {\n        if (d.percentage < 0.03) {\n          return '';\n        }\n        return d.children ? null : '<span class=\"amount\">' + d.value_fmt + '</span>' + d.name;\n      }).on('mouseover', function (d) {\n        __WEBPACK_IMPORTED_MODULE_3_d3__[\"select\"](this).transition().duration(200).style({ 'background': __WEBPACK_IMPORTED_MODULE_3_d3__[\"rgb\"](d.color).darker() });\n      }).on('mouseout', function (d) {\n        __WEBPACK_IMPORTED_MODULE_3_d3__[\"select\"](this).transition().duration(500).style({ 'background': d.color });\n      }).transition().duration(500).delay(function (d, i) {\n        return Math.min(i * 30, 1500);\n      }).style('background', function (d) {\n        return d.color;\n      });\n    }\n  }]);\n\n  return Treemap;\n}();\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Treemap);\n\n/***/ }),\n\n/***/ 44:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return parseURL; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_query_string__ = __webpack_require__(17);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_query_string___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_query_string__);\n\n\nfunction parseURL(url) {\n  var query = {};\n  var hashURL = url.split('#')[1];\n\n  var querySplit = hashURL.split('?');\n  var queryStr = '';\n\n  if (querySplit.length > 1) {\n    queryStr = querySplit[1];\n    hashURL = querySplit[0];\n  }\n\n  // Get hierarchies from hash\n  var hashParts = hashURL.split('/').filter(function (s) {\n    return s !== '';\n  });\n\n  if (queryStr !== '') {\n    query = __WEBPACK_IMPORTED_MODULE_0_query_string__[\"parse\"](queryStr);\n  }\n\n  return [hashParts, query];\n}\n\n\n\n/***/ }),\n\n/***/ 45:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__treemap__ = __webpack_require__(43);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__utils_urlParser__ = __webpack_require__(44);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_axios__ = __webpack_require__(24);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_axios___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_axios__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_d3__ = __webpack_require__(15);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_d3___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_d3__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_query_string__ = __webpack_require__(17);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_query_string___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_query_string__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_accounting__ = __webpack_require__(23);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_accounting___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_accounting__);\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'treemap',\n\n  props: {\n    datapackage: '',\n    apiurl: ''\n  },\n\n  data: function data() {\n    return {\n      model: {},\n      colors: [],\n      config: {\n        'value': 'Betrag.sum',\n        'hierarchies': [{\n          'datapackageHierarchy': 'administrative_classification',\n          'url': 'einzelplan',\n          'label': 'Einzelpläne'\n        }, {\n          'datapackageHierarchy': 'functional_classification',\n          'url': 'funktion',\n          'label': 'Funktionen'\n        }],\n        'filters': {\n          'Jahr': {\n            'name': 'date_2.Jahr',\n            'values': [{ 'label': 2017, 'value': 2017 }, { 'label': 2016, 'value': 2016 }],\n            'type': 'number',\n            'default': true,\n            'label': 'Jahr'\n          },\n          'Typ': {\n            'name': 'fin_source_Typ.Typ',\n            'values': [{\n              'label': 'Senatsverwaltungen',\n              'value': 1\n            }, {\n              'label': 'Verfassungsorgane',\n              'value': 2\n            }, {\n              'label': 'Bezirke',\n              'value': 3\n            }],\n            'type': 'string',\n            'default': false,\n            'defaultLabel': 'Alle',\n            'label': 'Typ'\n          },\n          'titelart': {\n            'name': 'direction_2.Titelart',\n            'values': [{\n              'label': 'Ausgabetitel',\n              'value': 'Ausgabetitel'\n            }, {\n              'label': 'Einnahmetitel',\n              'value': 'Einnahmetitel'\n            }],\n            'default': true,\n            'type': 'string',\n            'label': 'Art'\n          }\n        }\n      },\n      selectedHierarchy: {},\n      filters: {},\n      data: {}\n    };\n  },\n  mounted: function mounted() {\n    // Get default filters values\n    this.treemap = new __WEBPACK_IMPORTED_MODULE_0__treemap__[\"a\" /* default */]('.treemap');\n    this.colors = ['#CF3D1E', '#F15623', '#F68B1F', '#FFC60B', '#DFCE21', '#BCD631', '#95C93D', '#48B85C', '#00833D', '#00B48D', '#60C4B1', '#27C4F4', '#478DCB', '#3E67B1', '#4251A3', '#59449B', '#6E3F7C', '#6A246D', '#8A4873', '#EB0080', '#EF58A0', '#C05A89'];\n\n    this.getURLParameters();\n    this.getModel();\n  },\n\n\n  methods: {\n    defaultFilters: function defaultFilters() {\n      for (var k in this.config.filters) {\n        if (this.config.filters[k].default) {\n          this.$set(this.filters, k, this.config.filters[k].values[0].value);\n        } else {\n          this.$set(this.filters, k, '');\n        }\n      }\n    },\n\n    getURLParameters: function getURLParameters() {\n      var URLarguments = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__utils_urlParser__[\"a\" /* parseURL */])(window.location.toString());\n      if (URLarguments[0].length === 0) {\n        this.$set(this.selectedHierarchy, 'hierarchy', this.config['hierarchies'][0]);\n        window.location.hash = this.config['hierarchies'][0]['url'];\n      } else {\n        var hierarchy = this.config['hierarchies'].find(function (h) {\n          return h['url'] === URLarguments[0][0];\n        });\n        this.$set(this.selectedHierarchy, 'hierarchy', hierarchy);\n      }\n      this.$set(this.selectedHierarchy, 'levelsParams', URLarguments[0].splice(1));\n\n      var urlFilters = URLarguments[1];\n      for (var k in urlFilters) {\n        this.filters[k] = urlFilters[k];\n      }\n    },\n\n    getHierarchies: function getHierarchies() {\n      var levelsLength = this.selectedHierarchy['levelsParams'].length;\n      var hierqQuery = '';\n\n      if (levelsLength > 0) {\n        var hierarchy = this.model.hierarchies[this.selectedHierarchy['hierarchy']['datapackageHierarchy']];\n        for (var i in hierarchy['levelsP']) {\n          if (i < levelsLength) {\n            var hierqName = hierarchy['levels'][i];\n            hierqQuery += '|' + this.model.dimensions[hierqName]['key_ref'] + ':\"' + this.selectedHierarchy['levelsParams'][i] + '\"';\n          }\n        }\n      }\n      return hierqQuery;\n    },\n\n    addFilter: function addFilter() {\n      var URLarguments = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__utils_urlParser__[\"a\" /* parseURL */])(window.location.toString());\n      window.location.hash = URLarguments[0].join('/') + '?' + __WEBPACK_IMPORTED_MODULE_4_query_string__[\"stringify\"](this.filters);\n    },\n\n    getDrilldown: function getDrilldown() {\n      var levelsLength = this.selectedHierarchy['levelsParams'].length;\n      var label, key;\n      var hierarchyName = this.selectedHierarchy['hierarchy']['datapackageHierarchy'];\n\n      if (levelsLength >= 1) {\n        var dimensionName = this.model.hierarchies[hierarchyName]['levels'][levelsLength];\n        label = this.model.dimensions[dimensionName]['label_ref'];\n        key = this.model.dimensions[dimensionName]['key_ref'];\n      } else {\n        label = this.model.dimensions[this.model.hierarchies[hierarchyName]['levels'][0]]['label_ref'];\n        key = this.model.dimensions[this.model.hierarchies[hierarchyName]['levels'][0]]['key_ref'];\n      }\n      return label + '|' + key;\n    },\n\n    getModel: function getModel() {\n      var _this = this;\n\n      var apiRequestUrl = '' + this.apiurl + this.datapackage + '/model';\n      return __WEBPACK_IMPORTED_MODULE_2_axios___default.a.get(apiRequestUrl).then(function (response) {\n        _this.model = response.data.model;\n        var hierarchyName = _this.selectedHierarchy['hierarchy']['datapackageHierarchy'];\n        _this.$set(_this.selectedHierarchy, 'levels', _this.model['hierarchies'][hierarchyName]['levels']);\n        _this.defaultFilters();\n        window.addEventListener('hashchange', _this.updateData);\n      });\n    },\n\n    updateData: function updateData() {\n      this.getURLParameters();\n      this.getData();\n    },\n\n    getCurrentLevel: function getCurrentLevel() {\n      var hierarchyName = this.selectedHierarchy['hierarchy']['datapackageHierarchy'];\n      var levelsLength = this.selectedHierarchy['levelsParams'].length;\n      var levelName = this.model['hierarchies'][hierarchyName]['levels'][levelsLength];\n      var levelLabel = this.model['dimensions'][levelName]['label_ref'];\n      var levelKey = this.model['dimensions'][levelName]['key_ref'];\n      return [levelLabel, levelKey];\n    },\n\n    getFilters: function getFilters() {\n      var filters = '';\n      var filterArgumentQuote;\n      for (var k in this.filters) {\n        if (this.filters[k] !== '') {\n          filterArgumentQuote = '';\n          if (this.config['filters'][k]['type'] === 'string') {\n            filterArgumentQuote = '\"';\n          }\n          filters += this.config['filters'][k]['name'] + ':' + filterArgumentQuote + this.filters[k] + filterArgumentQuote + '|';\n        }\n      }\n\n      if (filters === '') {\n        for (k in this.config['filters']) {\n          if (this.config['filters'][k]['default']) {\n            var defaultFilter = this.config['filters'][k]['name'];\n            var defaultFilterValue = this.config['filters'][k]['values'][0]['value'];\n            filterArgumentQuote = '';\n            if (this.config['filters'][k]['type'] === 'string') {\n              filterArgumentQuote = '\"';\n            }\n            filters += defaultFilter + ':' + filterArgumentQuote + defaultFilterValue + filterArgumentQuote + '|';\n          }\n        }\n      }\n\n      return filters;\n    },\n\n    formatValue: function formatValue(value) {\n      return __WEBPACK_IMPORTED_MODULE_5_accounting__[\"formatMoney\"](value, '€', 0, '.');\n    },\n\n    getData: function getData($event) {\n      var _this2 = this;\n\n      var apiRequestUrl;\n\n      var drilldown = this.getDrilldown();\n      var hierarchiesFilter = this.getHierarchies();\n      var filters = this.getFilters();\n\n      apiRequestUrl = '' + this.apiurl + this.datapackage + '/aggregate?cut=' + filters + hierarchiesFilter + '&drilldown=' + drilldown + '&order=' + this.config.value + ':desc&pagesize=30';\n\n      __WEBPACK_IMPORTED_MODULE_2_axios___default.a.get(apiRequestUrl).then(function (response) {\n        _this2.data = response.data;\n\n        var color = __WEBPACK_IMPORTED_MODULE_3_d3__[\"scale\"].ordinal().range(_this2.colors);\n        color = color.domain([_this2.data.total_cell_count, 0]);\n\n        var total = 0;\n\n        // Remove data with negative values\n        var valueDimension = _this2.config['value'];\n        _this2.data['cells'] = _this2.data['cells'].filter(function (c) {\n          return c[valueDimension] > 0;\n        });\n\n        // Calculate total amount to use it in percentual calculations\n        // this.data['summary'] = {}\n        _this2.data['summary']['_value'] = 0;\n        for (var i in _this2.data['cells']) {\n          total += _this2.data['cells'][i][_this2.config['value']];\n          _this2.data['summary']['_value'] = total;\n        }\n        _this2.data['summary']['_valueFmt'] = _this2.formatValue(_this2.data['summary']['_value']);\n\n        for (i in _this2.data['cells']) {\n          var level = _this2.getCurrentLevel();\n          var levelsParams = '';\n          var filters = __WEBPACK_IMPORTED_MODULE_4_query_string__[\"stringify\"](_this2.filters);\n          if (filters !== '') {\n            filters = '?' + filters;\n          }\n          if (_this2.selectedHierarchy['levelsParams'].length >= 1) {\n            levelsParams = _this2.selectedHierarchy['levelsParams'].join('/') + '/';\n          }\n          _this2.data['cells'][i]['_value'] = _this2.data['cells'][i][_this2.config['value']];\n          _this2.data['cells'][i]['_color'] = color(i);\n          _this2.data['cells'][i]['_label'] = _this2.data['cells'][i][level[0]];\n          _this2.data['cells'][i]['_value_fmt'] = _this2.formatValue(_this2.data['cells'][i]['_value']);\n          if (_this2.selectedHierarchy['levelsParams'].length < _this2.model.hierarchies[_this2.selectedHierarchy['hierarchy']['datapackageHierarchy']]['levels'].length - 1) {\n            _this2.data['cells'][i]['_url'] = '#' + _this2.selectedHierarchy['hierarchy']['url'] + '/' + levelsParams + _this2.data['cells'][i][level[1]] + filters;\n          }\n          _this2.data['cells'][i]['_percentage'] = _this2.data['cells'][i]['_value'] / total;\n          _this2.data['cells'][i]['_small'] = _this2.data['cells'][i]['_percentage'] < 0.01;\n          var percentageFmt = (_this2.data['cells'][i]['_percentage'] * 100).toFixed(2) + '%';\n          percentageFmt = percentageFmt.replace('.', ',');\n          _this2.data['cells'][i]['_percentage_fmt'] = percentageFmt;\n        }\n\n        _this2.treemap.render(_this2.data);\n      }).catch(function (e) {\n        console.log(e);\n      });\n    }\n  }\n});\n\n/***/ }),\n\n/***/ 60:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 66:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"treemap-content\"\n  }, [_c('div', {\n    staticClass: \"controls\"\n  }, [_c('div', {\n    staticClass: \"hierarchies\"\n  }, _vm._l((_vm.config['hierarchies']), function(hierq) {\n    return _c('a', {\n      staticClass: \"btn btn-default\",\n      attrs: {\n        \"href\": (\"#\" + (hierq.url))\n      }\n    }, [_vm._v(_vm._s(hierq['label']))])\n  })), _vm._v(\" \"), _c('div', {\n    staticClass: \"filters\"\n  }, _vm._l((_vm.config['filters']), function(filter, filterName) {\n    return _c('div', {\n      staticClass: \"filter\"\n    }, [_vm._v(\"\\n        \" + _vm._s(filterName) + \"\\n        \"), _c('select', {\n      directives: [{\n        name: \"model\",\n        rawName: \"v-model\",\n        value: (_vm.filters[filterName]),\n        expression: \"filters[filterName]\"\n      }],\n      attrs: {\n        \"onchange\": _vm.addFilter()\n      },\n      on: {\n        \"change\": function($event) {\n          var $$selectedVal = Array.prototype.filter.call($event.target.options, function(o) {\n            return o.selected\n          }).map(function(o) {\n            var val = \"_value\" in o ? o._value : o.value;\n            return val\n          });\n          _vm.$set(_vm.filters, filterName, $event.target.multiple ? $$selectedVal : $$selectedVal[0])\n        }\n      }\n    }, [(!filter.default) ? _c('option', {\n      attrs: {\n        \"value\": \"\"\n      },\n      domProps: {\n        \"selected\": true\n      }\n    }, [_vm._v(_vm._s(filter.defaultLabel))]) : _vm._e(), _vm._v(\" \"), _vm._l((filter.values), function(filterValue) {\n      return _c('option', {\n        domProps: {\n          \"value\": filterValue.value\n        }\n      }, [_vm._v(_vm._s(filterValue.label))])\n    })], 2)])\n  }))]), _vm._v(\" \"), _c('div', {\n    staticClass: \"treemap\"\n  }), _vm._v(\" \"), _c('table', {\n    staticClass: \"table table-condensed\"\n  }, [_vm._m(0), _vm._v(\" \"), _vm._l((_vm.data['cells']), function(cell) {\n    return _c('tr', {\n      class: {\n        small: cell['_small']\n      }\n    }, [_c('td', [_c('i', {\n      staticClass: \"fa fa-square\",\n      style: ((\"color: \" + (cell['_color']) + \";\"))\n    }), _vm._v(\" \"), (cell['_url']) ? _c('a', {\n      attrs: {\n        \"href\": cell['_url']\n      }\n    }, [_vm._v(_vm._s(cell['_label']))]) : _vm._e(), _vm._v(\" \"), (!cell['_url']) ? _c('span', [_vm._v(\"\\n            \" + _vm._s(cell['_label']) + \"\\n          \")]) : _vm._e()]), _c('td', {\n      staticClass: \"num\"\n    }, [_vm._v(_vm._s(cell['_value_fmt']))]), _vm._v(\" \"), _c('td', {\n      staticClass: \"num\"\n    }, [_vm._v(_vm._s(cell['_percentage_fmt']))])])\n  }), _vm._v(\" \"), _c('tr', [_c('th', [_vm._v(\"\\n        Total\\n      \")]), _vm._v(\" \"), (_vm.data['summary']) ? _c('th', {\n    staticClass: \"num\"\n  }, [_vm._v(_vm._s(_vm.data['summary']['_valueFmt']))]) : _vm._e(), _vm._v(\" \"), _c('th', {\n    staticClass: \"num\"\n  }, [_vm._v(\"100%\")])])], 2)])\n},staticRenderFns: [function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('tr', [_c('th', [_vm._v(\"Titel\")]), _vm._v(\" \"), _c('th', {\n    staticClass: \"num\"\n  }, [_vm._v(\"Betrag\")]), _vm._v(\" \"), _c('th', {\n    staticClass: \"num\"\n  }, [_vm._v(\"Anteil\")])])\n}]}\n\n/***/ }),\n\n/***/ 69:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ })\n\n},[42]);\n\n\n// WEBPACK FOOTER //\n// static/js/app.897dce40948f85421284.js","import Vue from 'vue'\nimport Router from 'vue-router'\nimport TreemapComponent from '@/components/TreemapComponent'\n\nVue.use(Router)\n\nexport default new Router({\n  routes: [\n    {\n      path: '/:level',\n      name: 'Treemap',\n      component: TreemapComponent,\n      props: true\n    }\n  ]\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/router/index.js","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-3cef95dc\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./TreemapComponent.vue\")\n}\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./TreemapComponent.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3cef95dc\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./TreemapComponent.vue\"),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/TreemapComponent.vue\n// module id = 4\n// module chunks = 1","import 'document-register-element/build/document-register-element'\nimport Vue from 'vue'\nimport VueCustomElement from 'vue-custom-element'\nimport TreemapComponent from './components/TreemapComponent'\nimport Promise from 'es6-promise'\n/* eslint-disable no-unused-vars */\nimport router from './router'\n\nPromise.polyfill()\n\nVue.config.productionTip = false\nVue.use(VueCustomElement)\nVue.customElement('dp-treemap', TreemapComponent)\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","import $ from 'jquery'\nimport * as d3 from 'd3'\n\nexport default class Treemap {\n\n  constructor (elementID) {\n    this.$treemap = $(elementID)\n    this.treemap = null\n    this.div = null\n  }\n\n  create () {\n    this.width = this.$treemap.width()\n    this.height = this.$treemap.height()\n\n    this.$treemap.empty()\n\n    this.treemap = d3.layout.treemap()\n      .size([this.width, this.height])\n      .sticky(true)\n      .sort(function (a, b) { return Math.abs(a.value) - Math.abs(b.value) })\n      .value(function (d) { return Math.abs(d.value) })\n\n    this.div = d3.select('.treemap').append('div')\n      .style('position', 'relative')\n      .style('width', this.width + 'px')\n      .style('height', this.height + 'px')\n  }\n\n  render (data, dimension) {\n    // TODO: remove elements, don't create each time.\n    this.create()\n\n    var root = {\n      children: []\n    }\n    for (var i = 0; i < data.cells.length; i += 1) {\n      root.children.push({\n        name: data.cells[i]['_label'],\n        value: data.cells[i]['_value'],\n        value_fmt: data.cells[i]['_value_fmt'],\n        percentage: data.cells[i]['_percentage'],\n        href: data.cells[i]['_url'],\n        color: data.cells[i]['_color']\n      })\n    }\n\n    function positionNode (d) {\n      d.style('left', function (d) { return d.x + 'px' })\n       .style('top', function (d) { return d.y + 'px' })\n       .style('width', function (d) { return Math.max(0, d.dx - 1) + 'px' })\n       .style('height', function (d) { return Math.max(0, d.dy - 1) + 'px' })\n    }\n\n    this.div.datum(root).selectAll('.node')\n        .data(this.treemap.nodes)\n          .enter().append('a')\n            .attr('href', function (d) { return d.href })\n            .attr('class', 'node')\n            .call(positionNode)\n            .style('background', '#fff')\n            .classed('big', function (d) { return d.value > data.summary._value / 50 })\n            .html(function (d) {\n              if (d.percentage < 0.03) {\n                return ''\n              }\n              return d.children ? null : '<span class=\"amount\">' + d.value_fmt + '</span>' + d.name\n            })\n            .on('mouseover', function (d) {\n              d3.select(this).transition().duration(200)\n                .style({ 'background': d3.rgb(d.color).darker() })\n            })\n            .on('mouseout', function (d) {\n              d3.select(this).transition().duration(500)\n                .style({'background': d.color})\n            })\n            .transition()\n            .duration(500)\n            .delay(function (d, i) { return Math.min(i * 30, 1500) })\n            .style('background', function (d) { return d.color })\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/treemap/index.js","import * as qs from 'query-string'\n\nfunction parseURL (url) {\n  var query = {}\n  var hashURL = url.split('#')[1]\n\n  var querySplit = hashURL.split('?')\n  var queryStr = ''\n\n  if (querySplit.length > 1) {\n    queryStr = querySplit[1]\n    hashURL = querySplit[0]\n  }\n\n  // Get hierarchies from hash\n  var hashParts = hashURL.split('/').filter(s => s !== '')\n\n  if (queryStr !== '') {\n    query = qs.parse(queryStr)\n  }\n\n  return [hashParts, query]\n}\n\nexport { parseURL }\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/urlParser.js","<template>\n  <div class=\"treemap-content\">\n    <div class=\"controls\">\n      <div class=\"hierarchies\">\n      <a class=\"btn btn-default\" :href=\"`#${hierq.url}`\" v-for=\"hierq in config['hierarchies']\">{{hierq['label']}}</a>\n      </div>\n      <div class=\"filters\">\n        <div class=\"filter\" v-for=\"(filter, filterName) in config['filters']\">\n          {{ filterName }}\n          <select :onchange=\"addFilter()\" v-model=\"filters[filterName]\">\n            <option :selected='true' value='' v-if=\"!filter.default\">{{filter.defaultLabel}}</option>\n            <option :value=\"filterValue.value\" v-for=\"filterValue in filter.values\">{{filterValue.label}}</option>\n          </select>\n        </div>\n      </div>\n    </div>\n    <div class=\"treemap\">\n    </div>\n    <table class=\"table table-condensed\">\n      <tr>\n        <th>Titel</th>\n        <th class=\"num\">Betrag</th>\n        <th class=\"num\">Anteil</th>\n      </tr>\n      <tr v-bind:class=\"{small: cell['_small']}\" v-for=\"cell in data['cells']\">\n          <td>\n          <i :style=\"`color: ${cell['_color']};`\" class=\"fa fa-square\"></i>\n          <a v-if=\"cell['_url']\" :href=\"cell['_url']\">{{ cell['_label'] }}</a>\n            <span v-if=\"!cell['_url']\">\n              {{ cell['_label'] }}\n            </span\n          </td>\n          <td class=\"num\">{{ cell['_value_fmt'] }}</td>\n          <td class=\"num\">{{ cell['_percentage_fmt'] }}</td>\n        </tr>\n      <tr>\n        <th>\n          Total\n        </th>\n        <th v-if=\"data['summary']\" class=\"num\">{{ data['summary']['_valueFmt'] }}</th>\n        <th class=\"num\">100%</th>\n      </tr>\n    </table>\n  </div>\n</template>\n\n<script>\nimport Treemap from '../treemap'\nimport { parseURL } from '../utils/urlParser'\nimport axios from 'axios'\nimport * as d3 from 'd3'\nimport * as qs from 'query-string'\nimport * as accounting from 'accounting'\n\nexport default {\n  name: 'treemap',\n\n  props: {\n    datapackage: '',\n    apiurl: ''\n  },\n\n  data () {\n    return {\n      model: {},\n      colors: [],\n      config: {\n        'value': 'Betrag.sum',\n        'hierarchies': [\n          {\n            'datapackageHierarchy': 'administrative_classification',\n            'url': 'einzelplan',\n            'label': 'Einzelpläne'\n          },\n          {\n            'datapackageHierarchy': 'functional_classification',\n            'url': 'funktion',\n            'label': 'Funktionen'\n          }\n        ],\n        'filters': {\n          'Jahr': {\n            'name': 'date_2.Jahr',\n            'values': [{'label': 2017, 'value': 2017}, {'label': 2016, 'value': 2016}],\n            'type': 'number',\n            'default': true,\n            'label': 'Jahr'\n          },\n          'Typ': {\n            'name': 'fin_source_Typ.Typ',\n            'values': [\n              {\n                'label': 'Senatsverwaltungen',\n                'value': 1\n              },\n              {\n                'label': 'Verfassungsorgane',\n                'value': 2\n              },\n              {\n                'label': 'Bezirke',\n                'value': 3\n              }\n            ],\n            'type': 'string',\n            'default': false,\n            'defaultLabel': 'Alle',\n            'label': 'Typ'\n          },\n          'titelart': {\n            'name': 'direction_2.Titelart',\n            'values': [\n              {\n                'label': 'Ausgabetitel',\n                'value': 'Ausgabetitel'\n              },\n              {\n                'label': 'Einnahmetitel',\n                'value': 'Einnahmetitel'\n              }\n            ],\n            'default': true,\n            'type': 'string',\n            'label': 'Art'\n          }\n        }\n      },\n      selectedHierarchy: {},\n      filters: {},\n      data: {}\n    }\n  },\n\n  mounted () {\n    // Get default filters values\n    this.treemap = new Treemap('.treemap')\n    this.colors = [\n      '#CF3D1E', '#F15623', '#F68B1F', '#FFC60B', '#DFCE21',\n      '#BCD631', '#95C93D', '#48B85C', '#00833D', '#00B48D',\n      '#60C4B1', '#27C4F4', '#478DCB', '#3E67B1', '#4251A3',\n      '#59449B', '#6E3F7C', '#6A246D', '#8A4873', '#EB0080',\n      '#EF58A0', '#C05A89' ]\n\n    this.getURLParameters()\n    this.getModel()\n  },\n\n  methods: {\n    defaultFilters: function () {\n      for (var k in this.config.filters) {\n        if (this.config.filters[k].default) {\n          this.$set(this.filters, k, this.config.filters[k].values[0].value)\n        } else {\n          this.$set(this.filters, k, '')\n        }\n      }\n    },\n\n    getURLParameters: function () {\n      var URLarguments = parseURL(window.location.toString())\n      if (URLarguments[0].length === 0) {\n        this.$set(this.selectedHierarchy, 'hierarchy', this.config['hierarchies'][0])\n        window.location.hash = this.config['hierarchies'][0]['url']\n      } else {\n        var hierarchy = this.config['hierarchies'].find(function (h) { return h['url'] === URLarguments[0][0] })\n        this.$set(this.selectedHierarchy, 'hierarchy', hierarchy)\n      }\n      this.$set(this.selectedHierarchy, 'levelsParams', URLarguments[0].splice(1))\n\n      var urlFilters = URLarguments[1]\n      for (var k in urlFilters) {\n        this.filters[k] = urlFilters[k]\n      }\n    },\n\n    getHierarchies: function () {\n      var levelsLength = this.selectedHierarchy['levelsParams'].length\n      var hierqQuery = ''\n\n      if (levelsLength > 0) {\n        var hierarchy = this.model.hierarchies[this.selectedHierarchy['hierarchy']['datapackageHierarchy']]\n        for (var i in hierarchy['levelsP']) {\n          if (i < levelsLength) {\n            var hierqName = hierarchy['levels'][i]\n            hierqQuery += `|${this.model.dimensions[hierqName]['key_ref']}:\"${this.selectedHierarchy['levelsParams'][i]}\"`\n          }\n        }\n      }\n      return hierqQuery\n    },\n\n    addFilter: function () {\n      var URLarguments = parseURL(window.location.toString())\n      window.location.hash = `${URLarguments[0].join('/')}?${qs.stringify(this.filters)}`\n    },\n\n    getDrilldown: function () {\n      var levelsLength = this.selectedHierarchy['levelsParams'].length\n      var label, key\n      var hierarchyName = this.selectedHierarchy['hierarchy']['datapackageHierarchy']\n\n      if (levelsLength >= 1) {\n        var dimensionName = this.model.hierarchies[hierarchyName]['levels'][levelsLength]\n        label = this.model.dimensions[dimensionName]['label_ref']\n        key = this.model.dimensions[dimensionName]['key_ref']\n      } else {\n        label = this.model.dimensions[this.model.hierarchies[hierarchyName]['levels'][0]]['label_ref']\n        key = this.model.dimensions[this.model.hierarchies[hierarchyName]['levels'][0]]['key_ref']\n      }\n      return `${label}|${key}`\n    },\n\n    getModel: function () {\n      var apiRequestUrl = `${this.apiurl}${this.datapackage}/model`\n      return axios.get(apiRequestUrl).then(response => {\n        this.model = response.data.model\n        var hierarchyName = this.selectedHierarchy['hierarchy']['datapackageHierarchy']\n        this.$set(this.selectedHierarchy, 'levels', this.model['hierarchies'][hierarchyName]['levels'])\n        this.defaultFilters()\n        window.addEventListener('hashchange', this.updateData)\n      })\n    },\n\n    updateData: function () {\n      this.getURLParameters()\n      this.getData()\n    },\n\n    getCurrentLevel: function () {\n      var hierarchyName = this.selectedHierarchy['hierarchy']['datapackageHierarchy']\n      var levelsLength = this.selectedHierarchy['levelsParams'].length\n      var levelName = this.model['hierarchies'][hierarchyName]['levels'][levelsLength]\n      var levelLabel = this.model['dimensions'][levelName]['label_ref']\n      var levelKey = this.model['dimensions'][levelName]['key_ref']\n      return [levelLabel, levelKey]\n    },\n\n    getFilters: function () {\n      var filters = ''\n      var filterArgumentQuote\n      for (var k in this.filters) {\n        if (this.filters[k] !== '') {\n          filterArgumentQuote = ''\n          if (this.config['filters'][k]['type'] === 'string') {\n            filterArgumentQuote = '\"'\n          }\n          filters += `${this.config['filters'][k]['name']}:${filterArgumentQuote}${this.filters[k]}${filterArgumentQuote}|`\n        }\n      }\n\n      if (filters === '') {\n        for (k in this.config['filters']) {\n          if (this.config['filters'][k]['default']) {\n            var defaultFilter = this.config['filters'][k]['name']\n            var defaultFilterValue = this.config['filters'][k]['values'][0]['value']\n            filterArgumentQuote = ''\n            if (this.config['filters'][k]['type'] === 'string') {\n              filterArgumentQuote = '\"'\n            }\n            filters += `${defaultFilter}:${filterArgumentQuote}${defaultFilterValue}${filterArgumentQuote}|`\n          }\n        }\n      }\n\n      return filters\n    },\n\n    formatValue: function (value) {\n      return accounting.formatMoney(value, '€', 0, '.')\n    },\n\n    getData: function ($event) {\n      var apiRequestUrl\n\n      var drilldown = this.getDrilldown()\n      var hierarchiesFilter = this.getHierarchies()\n      var filters = this.getFilters()\n\n      apiRequestUrl = `${this.apiurl}${this.datapackage}/aggregate?cut=${filters}${hierarchiesFilter}&drilldown=${drilldown}&order=${this.config.value}:desc&pagesize=30`\n\n      axios.get(apiRequestUrl).then(response => {\n        this.data = response.data\n\n        var color = d3.scale.ordinal().range(this.colors)\n        color = color.domain([this.data.total_cell_count, 0])\n\n        var total = 0\n\n        // Remove data with negative values\n        var valueDimension = this.config['value']\n        this.data['cells'] = this.data['cells'].filter(function (c) { return c[valueDimension] > 0 })\n\n        // Calculate total amount to use it in percentual calculations\n        // this.data['summary'] = {}\n        this.data['summary']['_value'] = 0\n        for (var i in this.data['cells']) {\n          total += this.data['cells'][i][this.config['value']]\n          this.data['summary']['_value'] = total\n        }\n        this.data['summary']['_valueFmt'] = this.formatValue(this.data['summary']['_value'])\n\n        for (i in this.data['cells']) {\n          var level = this.getCurrentLevel()\n          var levelsParams = ''\n          var filters = qs.stringify(this.filters)\n          if (filters !== '') {\n            filters = '?' + filters\n          }\n          if (this.selectedHierarchy['levelsParams'].length >= 1) {\n            levelsParams = `${this.selectedHierarchy['levelsParams'].join('/')}/`\n          }\n          this.data['cells'][i]['_value'] = this.data['cells'][i][this.config['value']]\n          this.data['cells'][i]['_color'] = color(i)\n          this.data['cells'][i]['_label'] = this.data['cells'][i][level[0]]\n          this.data['cells'][i]['_value_fmt'] = this.formatValue(this.data['cells'][i]['_value'])\n          if (this.selectedHierarchy['levelsParams'].length < this.model.hierarchies[this.selectedHierarchy['hierarchy']['datapackageHierarchy']]['levels'].length - 1) {\n            this.data['cells'][i]['_url'] = `#${this.selectedHierarchy['hierarchy']['url']}/${levelsParams}${this.data['cells'][i][level[1]]}${filters}`\n          }\n          this.data['cells'][i]['_percentage'] = this.data['cells'][i]['_value'] / total\n          this.data['cells'][i]['_small'] = this.data['cells'][i]['_percentage'] < 0.01\n          var percentageFmt = (this.data['cells'][i]['_percentage'] * 100).toFixed(2) + '%'\n          percentageFmt = percentageFmt.replace('.', ',')\n          this.data['cells'][i]['_percentage_fmt'] = percentageFmt\n        }\n\n        this.treemap.render(this.data)\n      }).catch(e => {\n        console.log(e)\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n\n.treemap-content {\n  max-width: 1200px;\n  margin: auto;\n}\n\n.filters {\n  float: right;\n\n  .filter {\n    float: left;\n\n  }\n}\n\n.controls:after {\n  visibility: hidden;\n  display: block;\n  font-size: 0;\n  content: \" \";\n  clear: both;\n  height: 0;\n}\n\nh1, h2 {\n  font-weight: normal;\n}\n\nul {\n  list-style-type: none;\n  padding: 0;\n}\n\nli {\n  display: inline-block;\n  margin: 0 10px;\n}\n\na {\n  color: #42b983;\n}\n\n.treemap {\n  min-height: 500px;\n  overflow: hidden;\n}\n\n.node {\n  display: block;\n  border: 0;\n  color: #fff;\n  overflow: hidden;\n  position: absolute;\n  outline: 1px solid #fff;\n  font-size: 0.8em;\n  text-indent: -1000px;\n  padding: 5px;\n  box-sizing: border-box;\n  z-index: 5;\n  font-weight: 300;\n  text-shadow: -2px -2px 13px rgba(150, 150, 150, 0.9);\n}\n\n.amount {\n  color: #fff;\n  display: block;\n  padding-bottom: 0.2em;\n  font-size: 1.5em;\n  text-indent: 2px;\n}\n\n.node.big {\n  text-indent: 2px;\n}\n\n.node:hover {\n  text-indent: 2px;\n  text-decoration: none;\n}\n\n.table {\n  width: 100%;\n  margin-top: 1em;\n\n  td, th {\n    font-size: 0.9em;\n  }\n\n  td.num, th.num {\n    text-align: right;\n  }\n\n  .hide-small, .small {\n    display: none;\n  }\n\n  .label a, .label a:hover {\n    color: #fff;\n    text-decoration: none;\n    font-weight: 400;\n  }\n}\n\n@font-face {\n  font-family: 'fa-minimal';\n  src:  url('../assets/fonts/fa-minimal.eot?xss5ew');\n  src:  url('../assets/fonts/fa-minimal.eot?xss5ew#iefix') format('embedded-opentype'),\n    url('../assets/fonts/fa-minimal.ttf?xss5ew') format('truetype'),\n    url('../assets/fonts/fa-minimal.woff?xss5ew') format('woff'),\n    url('../assets/fonts/fa-minimal.svg?xss5ew#fa-minimal') format('svg');\n  font-weight: normal;\n  font-style: normal;\n}\n\n.fa {\n  display: inline-block;\n  /* use !important to prevent issues with browser extensions that change fonts */\n  font-family: 'fa-minimal' !important;\n  speak: none;\n  font-style: normal;\n  font-weight: normal;\n  font-variant: normal;\n  text-transform: none;\n  line-height: 1;\n\n  /* Better Font Rendering =========== */\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n.fa-check:before {\n  content: \"\\f00c\";\n}\n.fa-info-circle:before {\n  content: \"\\f05a\";\n}\n.fa-square:before {\n  content: \"\\f0c8\";\n}\n.fa-plus-square:before {\n  content: \"\\f0fe\";\n}\n.fa-minus-square:before {\n  content: \"\\f146\";\n}\n.fa-level-up:before {\n  content: \"\\f148\";\n}\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// TreemapComponent.vue?6c3bbcd6","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"treemap-content\"\n  }, [_c('div', {\n    staticClass: \"controls\"\n  }, [_c('div', {\n    staticClass: \"hierarchies\"\n  }, _vm._l((_vm.config['hierarchies']), function(hierq) {\n    return _c('a', {\n      staticClass: \"btn btn-default\",\n      attrs: {\n        \"href\": (\"#\" + (hierq.url))\n      }\n    }, [_vm._v(_vm._s(hierq['label']))])\n  })), _vm._v(\" \"), _c('div', {\n    staticClass: \"filters\"\n  }, _vm._l((_vm.config['filters']), function(filter, filterName) {\n    return _c('div', {\n      staticClass: \"filter\"\n    }, [_vm._v(\"\\n        \" + _vm._s(filterName) + \"\\n        \"), _c('select', {\n      directives: [{\n        name: \"model\",\n        rawName: \"v-model\",\n        value: (_vm.filters[filterName]),\n        expression: \"filters[filterName]\"\n      }],\n      attrs: {\n        \"onchange\": _vm.addFilter()\n      },\n      on: {\n        \"change\": function($event) {\n          var $$selectedVal = Array.prototype.filter.call($event.target.options, function(o) {\n            return o.selected\n          }).map(function(o) {\n            var val = \"_value\" in o ? o._value : o.value;\n            return val\n          });\n          _vm.$set(_vm.filters, filterName, $event.target.multiple ? $$selectedVal : $$selectedVal[0])\n        }\n      }\n    }, [(!filter.default) ? _c('option', {\n      attrs: {\n        \"value\": \"\"\n      },\n      domProps: {\n        \"selected\": true\n      }\n    }, [_vm._v(_vm._s(filter.defaultLabel))]) : _vm._e(), _vm._v(\" \"), _vm._l((filter.values), function(filterValue) {\n      return _c('option', {\n        domProps: {\n          \"value\": filterValue.value\n        }\n      }, [_vm._v(_vm._s(filterValue.label))])\n    })], 2)])\n  }))]), _vm._v(\" \"), _c('div', {\n    staticClass: \"treemap\"\n  }), _vm._v(\" \"), _c('table', {\n    staticClass: \"table table-condensed\"\n  }, [_vm._m(0), _vm._v(\" \"), _vm._l((_vm.data['cells']), function(cell) {\n    return _c('tr', {\n      class: {\n        small: cell['_small']\n      }\n    }, [_c('td', [_c('i', {\n      staticClass: \"fa fa-square\",\n      style: ((\"color: \" + (cell['_color']) + \";\"))\n    }), _vm._v(\" \"), (cell['_url']) ? _c('a', {\n      attrs: {\n        \"href\": cell['_url']\n      }\n    }, [_vm._v(_vm._s(cell['_label']))]) : _vm._e(), _vm._v(\" \"), (!cell['_url']) ? _c('span', [_vm._v(\"\\n            \" + _vm._s(cell['_label']) + \"\\n          \")]) : _vm._e()]), _c('td', {\n      staticClass: \"num\"\n    }, [_vm._v(_vm._s(cell['_value_fmt']))]), _vm._v(\" \"), _c('td', {\n      staticClass: \"num\"\n    }, [_vm._v(_vm._s(cell['_percentage_fmt']))])])\n  }), _vm._v(\" \"), _c('tr', [_c('th', [_vm._v(\"\\n        Total\\n      \")]), _vm._v(\" \"), (_vm.data['summary']) ? _c('th', {\n    staticClass: \"num\"\n  }, [_vm._v(_vm._s(_vm.data['summary']['_valueFmt']))]) : _vm._e(), _vm._v(\" \"), _c('th', {\n    staticClass: \"num\"\n  }, [_vm._v(\"100%\")])])], 2)])\n},staticRenderFns: [function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('tr', [_c('th', [_vm._v(\"Titel\")]), _vm._v(\" \"), _c('th', {\n    staticClass: \"num\"\n  }, [_vm._v(\"Betrag\")]), _vm._v(\" \"), _c('th', {\n    staticClass: \"num\"\n  }, [_vm._v(\"Anteil\")])])\n}]}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-3cef95dc\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"}}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/TreemapComponent.vue\n// module id = 66\n// module chunks = 1"],"sourceRoot":""}